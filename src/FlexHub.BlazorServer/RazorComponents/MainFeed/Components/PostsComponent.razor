@using Microsoft.AspNetCore.Mvc.Controllers
@using FlexHub.BlazorServer.CustomComponents.InfiniteScrolling

<div class="post-container pt-3">
    @if (Posts != null && Posts.Any())
    {
        <InfiniteScroll ObserverTargetId="observerTarget" ObservableTargetReached="(e) => FetchPosts(PageNum++, 5)">
            @foreach (var post in Posts)
            {
                <div class="mb-5">
                    <RadzenCard Style="background-color: var(--rz-background-secondary)">
                        <h2 class="fs-3 mt-2">@post.Title</h2>
                        <p class="text-start mt-4">@post.Content</p>

                        <p class="text-start fw-bold mt-3">
                            <span class="fw-normal">Posted by - </span> @post.PublisherDisplayName
                        </p>
                        
                        <p class="text-start fw-bold mt-1">
                            <span class="fw-normal">At - </span> @post.CreatedAt
                        </p>

                        <div class="tags-container fst-italic mt-4">
                            @if (post.Tags != null && post.Tags.Any())
                            {
                                @foreach (var tag in post.Tags)
                                {
                                    <p class="ms-2">
                                        @tag.Value
                                    </p>
                                }
                            }
                        </div>
                    </RadzenCard>
                </div>
            }
            <div class="mb-5" id="observerTarget"></div>
        </InfiniteScroll>
    }
</div>